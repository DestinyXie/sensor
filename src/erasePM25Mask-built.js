/*
 RequireJS 2.1.14 Copyright (c) 2010-2014, The Dojo Foundation All Rights Reserved.
 Available via the MIT or new BSD license.
 see: http://github.com/jrburke/requirejs for details
*/

var requirejs,require,define;(function(ba){function G(e){return"[object Function]"===K.call(e)}function H(e){return"[object Array]"===K.call(e)}function v(e,t){if(e){var n;for(n=0;n<e.length&&(!e[n]||!t(e[n],n,e));n+=1);}}function T(e,t){if(e){var n;for(n=e.length-1;-1<n&&(!e[n]||!t(e[n],n,e));n-=1);}}function t(e,t){return fa.call(e,t)}function m(e,n){return t(e,n)&&e[n]}function B(e,n){for(var r in e)if(t(e,r)&&n(e[r],r))break}function U(e,n,r,i){return n&&B(n,function(n,s){if(r||!t(e,s))i&&"object"==typeof n&&n&&!H(n)&&!G(n)&&!(n instanceof RegExp)?(e[s]||(e[s]={}),U(e[s],n,r,i)):e[s]=n}),e}function u(e,t){return function(){return t.apply(e,arguments)}}function ca(e){throw e}function da(e){if(!e)return e;var t=ba;return v(e.split("."),function(e){t=t[e]}),t}function C(e,t,n,r){return t=Error(t+"\nhttp://requirejs.org/docs/errors.html#"+e),t.requireType=e,t.requireModules=r,n&&(t.originalError=n),t}function ga(e){function n(e,t,n){var r,i,s,o,u,a,f,l,t=t&&t.split("/"),c=A.map,h=c&&c["*"];if(e){e=e.split("/"),i=e.length-1,A.nodeIdCompat&&Q.test(e[i])&&(e[i]=e[i].replace(Q,"")),"."===e[0].charAt(0)&&t&&(i=t.slice(0,t.length-1),e=i.concat(e)),i=e;for(s=0;s<i.length;s++)(o=i[s],"."===o)?(i.splice(s,1),s-=1):".."===o&&0!==s&&(1!=s||".."!==i[2])&&".."!==i[s-1]&&0<s&&(i.splice(s-1,2),s-=2);e=e.join("/")}if(n&&c&&(t||h)){i=e.split("/"),s=i.length;e:for(;0<s;s-=1){u=i.slice(0,s).join("/");if(t)for(o=t.length;0<o;o-=1)if(n=m(c,t.slice(0,o).join("/")))if(n=m(n,u)){r=n,a=s;break e}!f&&h&&m(h,u)&&(f=m(h,u),l=s)}!r&&f&&(r=f,a=l),r&&(i.splice(0,a,r),e=i.join("/"))}return(r=m(A.pkgs,e))?r:e}function r(e){z&&v(document.getElementsByTagName("script"),function(t){if(t.getAttribute("data-requiremodule")===e&&t.getAttribute("data-requirecontext")===x.contextName)return t.parentNode.removeChild(t),!0})}function i(e){var t=m(A.paths,e);if(t&&H(t)&&1<t.length)return t.shift(),x.require.undef(e),x.makeRequire(null,{skipMap:!0})([e]),!0}function s(e){var t,n=e?e.indexOf("!"):-1;return-1<n&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function o(e,t,r,i){var o,u,a=null,f=t?t.name:null,l=e,c=!0,h="";return e||(c=!1,e="_@r"+(q+=1)),e=s(e),a=e[0],e=e[1],a&&(a=n(a,f,i),u=m(j,a)),e&&(a?h=u&&u.normalize?u.normalize(e,function(e){return n(e,f,i)}):-1===e.indexOf("!")?n(e,f,i):e:(h=n(e,f,i),e=s(h),a=e[0],h=e[1],r=!0,o=x.nameToUrl(h))),r=a&&!u&&!r?"_unnormalized"+(W+=1):"",{prefix:a,name:h,parentMap:t,unnormalized:!!r,url:o,originalName:l,isDefine:c,id:(a?a+"!"+h:h)+r}}function a(e){var t=e.id,n=m(O,t);return n||(n=O[t]=new x.Module(e)),n}function f(e,n,r){var i=e.id,s=m(O,i);t(j,i)&&(!s||s.defineEmitComplete)?"defined"===n&&r(j[i]):(s=a(e),s.error&&"error"===n)?r(s.error):s.on(n,r)}function l(e,t){var n=e.requireModules,r=!1;t?t(e):(v(n,function(t){if(t=m(O,t))t.error=e,t.events.error&&(r=!0,t.emit("error",e))}),!r)&&g.onError(e)}function c(){R.length&&(ha.apply(P,[P.length,0].concat(R)),R=[])}function h(e){delete O[e],delete _[e]}function p(e,t,n){var r=e.map.id;e.error?e.emit("error",e.error):(t[r]=!0,v(e.depMaps,function(r,i){var s=r.id,o=m(O,s);o&&!e.depMatched[i]&&!n[s]&&(m(t,s)?(e.defineDep(i,j[s]),e.check()):p(o,t,n))}),n[r]=!0)}function d(){var e,t,n=(e=1e3*A.waitSeconds)&&x.startTime+e<(new Date).getTime(),s=[],o=[],u=!1,a=!0;if(!E){E=!0,B(_,function(e){var f=e.map,l=f.id;if(e.enabled&&(f.isDefine||o.push(e),!e.error))if(!e.inited&&n)i(l)?u=t=!0:(s.push(l),r(l));else if(!e.inited&&e.fetched&&f.isDefine&&(u=!0,!f.prefix))return a=!1});if(n&&s.length)return e=C("timeout","Load timeout for modules: "+s,null,s),e.contextName=x.contextName,l(e);a&&v(o,function(e){p(e,{},{})}),(!n||t)&&u&&(z||ea)&&!L&&(L=setTimeout(function(){L=0,d()},50)),E=!1}}function y(e){t(j,e[0])||a(o(e[0],null,!0)).init(e[1],e[2])}function b(e){var e=e.currentTarget||e.srcElement,t=x.onScriptLoad;return e.detachEvent&&!Y?e.detachEvent("onreadystatechange",t):e.removeEventListener("load",t,!1),t=x.onScriptError,(!e.detachEvent||Y)&&e.removeEventListener("error",t,!1),{node:e,id:e&&e.getAttribute("data-requiremodule")}}function w(){var e;for(c();P.length;){e=P.shift();if(null===e[0])return l(C("mismatch","Mismatched anonymous define() module: "+e[e.length-1]));y(e)}}var E,S,x,k,L,A={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},O={},_={},D={},P=[],j={},F={},I={},q=1,W=1;return k={require:function(e){return e.require?e.require:e.require=x.makeRequire(e.map)},exports:function(e){e.usingExports=!0;if(e.map.isDefine)return e.exports?j[e.map.id]=e.exports:e.exports=j[e.map.id]={}},module:function(e){return e.module?e.module:e.module={id:e.map.id,uri:e.map.url,config:function(){return m(A.config,e.map.id)||{}},exports:e.exports||(e.exports={})}}},S=function(e){this.events=m(D,e.id)||{},this.map=e,this.shim=m(A.shim,e.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},S.prototype={init:function(e,t,n,r){r=r||{},this.inited||(this.factory=t,n?this.on("error",n):this.events.error&&(n=u(this,function(e){this.emit("error",e)})),this.depMaps=e&&e.slice(0),this.errback=n,this.inited=!0,this.ignore=r.ignore,r.enabled||this.enabled?this.enable():this.check())},defineDep:function(e,t){this.depMatched[e]||(this.depMatched[e]=!0,this.depCount-=1,this.depExports[e]=t)},fetch:function(){if(!this.fetched){this.fetched=!0,x.startTime=(new Date).getTime();var e=this.map;if(!this.shim)return e.prefix?this.callPlugin():this.load();x.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],u(this,function(){return e.prefix?this.callPlugin():this.load()}))}},load:function(){var e=this.map.url;F[e]||(F[e]=!0,x.load(this.map.id,e))},check:function(){if(this.enabled&&!this.enabling){var e,t,n=this.map.id;t=this.depExports;var r=this.exports,i=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){this.defining=!0;if(1>this.depCount&&!this.defined){if(G(i)){if(this.events.error&&this.map.isDefine||g.onError!==ca)try{r=x.execCb(n,i,t,r)}catch(s){e=s}else r=x.execCb(n,i,t,r);this.map.isDefine&&void 0===r&&((t=this.module)?r=t.exports:this.usingExports&&(r=this.exports));if(e)return e.requireMap=this.map,e.requireModules=this.map.isDefine?[this.map.id]:null,e.requireType=this.map.isDefine?"define":"require",l(this.error=e)}else r=i;this.exports=r,this.map.isDefine&&!this.ignore&&(j[n]=r,g.onResourceLoad)&&g.onResourceLoad(x,this.map,this.depMaps),h(n),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else this.fetch()}},callPlugin:function(){var e=this.map,r=e.id,i=o(e.prefix);this.depMaps.push(i),f(i,"defined",u(this,function(i){var s,c;c=m(I,this.map.id);var p=this.map.name,d=this.map.parentMap?this.map.parentMap.name:null,v=x.makeRequire(e.parentMap,{enableBuildCallback:!0});if(this.map.unnormalized){if(i.normalize&&(p=i.normalize(p,function(e){return n(e,d,!0)})||""),i=o(e.prefix+"!"+p,this.map.parentMap),f(i,"defined",u(this,function(e){this.init([],function(){return e},null,{enabled:!0,ignore:!0})})),c=m(O,i.id))this.depMaps.push(i),this.events.error&&c.on("error",u(this,function(e){this.emit("error",e)})),c.enable()}else c?(this.map.url=x.nameToUrl(c),this.load()):(s=u(this,function(e){this.init([],function(){return e},null,{enabled:!0})}),s.error=u(this,function(e){this.inited=!0,this.error=e,e.requireModules=[r],B(O,function(e){0===e.map.id.indexOf(r+"_unnormalized")&&h(e.map.id)}),l(e)}),s.fromText=u(this,function(n,i){var u=e.name,f=o(u),c=M;i&&(n=i),c&&(M=!1),a(f),t(A.config,r)&&(A.config[u]=A.config[r]);try{g.exec(n)}catch(h){return l(C("fromtexteval","fromText eval for "+r+" failed: "+h,h,[r]))}c&&(M=!0),this.depMaps.push(f),x.completeLoad(u),v([u],s)}),i.load(e.name,v,s,A))})),x.enable(i,this),this.pluginMaps[i.id]=i},enable:function(){_[this.map.id]=this,this.enabling=this.enabled=!0,v(this.depMaps,u(this,function(e,n){var r,i;if("string"==typeof e){e=o(e,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[n]=e;if(r=m(k,e.id)){this.depExports[n]=r(this);return}this.depCount+=1,f(e,"defined",u(this,function(e){this.defineDep(n,e),this.check()})),this.errback&&f(e,"error",u(this,this.errback))}r=e.id,i=O[r],!t(k,r)&&i&&!i.enabled&&x.enable(e,this)})),B(this.pluginMaps,u(this,function(e){var t=m(O,e.id);t&&!t.enabled&&x.enable(e,this)})),this.enabling=!1,this.check()},on:function(e,t){var n=this.events[e];n||(n=this.events[e]=[]),n.push(t)},emit:function(e,t){v(this.events[e],function(e){e(t)}),"error"===e&&delete this.events[e]}},x={config:A,contextName:e,registry:O,defined:j,urlFetched:F,defQueue:P,Module:S,makeModuleMap:o,nextTick:g.nextTick,onError:l,configure:function(e){e.baseUrl&&"/"!==e.baseUrl.charAt(e.baseUrl.length-1)&&(e.baseUrl+="/");var t=A.shim,n={paths:!0,bundles:!0,config:!0,map:!0};B(e,function(e,t){n[t]?(A[t]||(A[t]={}),U(A[t],e,!0,!0)):A[t]=e}),e.bundles&&B(e.bundles,function(e,t){v(e,function(e){e!==t&&(I[e]=t)})}),e.shim&&(B(e.shim,function(e,n){H(e)&&(e={deps:e}),(e.exports||e.init)&&!e.exportsFn&&(e.exportsFn=x.makeShimExports(e)),t[n]=e}),A.shim=t),e.packages&&v(e.packages,function(e){var t,e="string"==typeof e?{name:e}:e;t=e.name,e.location&&(A.paths[t]=e.location),A.pkgs[t]=e.name+"/"+(e.main||"main").replace(ia,"").replace(Q,"")}),B(O,function(e,t){!e.inited&&!e.map.unnormalized&&(e.map=o(t))}),(e.deps||e.callback)&&x.require(e.deps||[],e.callback)},makeShimExports:function(e){return function(){var t;return e.init&&(t=e.init.apply(ba,arguments)),t||e.exports&&da(e.exports)}},makeRequire:function(i,s){function u(n,r,f){var c,h;return s.enableBuildCallback&&r&&G(r)&&(r.__requireJsBuild=!0),"string"==typeof n?G(r)?l(C("requireargs","Invalid require call"),f):i&&t(k,n)?k[n](O[i.id]):g.get?g.get(x,n,i,u):(c=o(n,i,!1,!0),c=c.id,t(j,c)?j[c]:l(C("notloaded",'Module name "'+c+'" has not been loaded yet for context: '+e+(i?"":". Use require([])")))):(w(),x.nextTick(function(){w(),h=a(o(null,i)),h.skipMap=s.skipMap,h.init(n,r,f,{enabled:!0}),d()}),u)}return s=s||{},U(u,{isBrowser:z,toUrl:function(e){var t,r=e.lastIndexOf("."),s=e.split("/")[0];return-1!==r&&("."!==s&&".."!==s||1<r)&&(t=e.substring(r,e.length),e=e.substring(0,r)),x.nameToUrl(n(e,i&&i.id,!0),t,!0)},defined:function(e){return t(j,o(e,i,!1,!0).id)},specified:function(e){return e=o(e,i,!1,!0).id,t(j,e)||t(O,e)}}),i||(u.undef=function(e){c();var t=o(e,i,!0),n=m(O,e);r(e),delete j[e],delete F[t.url],delete D[e],T(P,function(t,n){t[0]===e&&P.splice(n,1)}),n&&(n.events.defined&&(D[e]=n.events),h(e))}),u},enable:function(e){m(O,e.id)&&a(e).enable()},completeLoad:function(e){var n,r,s=m(A.shim,e)||{},o=s.exports;for(c();P.length;){r=P.shift();if(null===r[0]){r[0]=e;if(n)break;n=!0}else r[0]===e&&(n=!0);y(r)}r=m(O,e);if(!n&&!t(j,e)&&r&&!r.inited){if(A.enforceDefine&&(!o||!da(o)))return i(e)?void 0:l(C("nodefine","No define call for "+e,null,[e]));y([e,s.deps||[],s.exportsFn])}d()},nameToUrl:function(e,t,n){var r,i,s;(r=m(A.pkgs,e))&&(e=r);if(r=m(I,e))return x.nameToUrl(r,t,n);if(g.jsExtRegExp.test(e))r=e+(t||"");else{r=A.paths,e=e.split("/");for(i=e.length;0<i;i-=1)if(s=e.slice(0,i).join("/"),s=m(r,s)){H(s)&&(s=s[0]),e.splice(0,i,s);break}r=e.join("/"),r+=t||(/^data\:|\?/.test(r)||n?"":".js"),r=("/"===r.charAt(0)||r.match(/^[\w\+\.\-]+:/)?"":A.baseUrl)+r}return A.urlArgs?r+((-1===r.indexOf("?")?"?":"&")+A.urlArgs):r},load:function(e,t){g.load(x,e,t)},execCb:function(e,t,n,r){return t.apply(r,n)},onScriptLoad:function(e){if("load"===e.type||ja.test((e.currentTarget||e.srcElement).readyState))N=null,e=b(e),x.completeLoad(e.id)},onScriptError:function(e){var t=b(e);if(!i(t.id))return l(C("scripterror","Script error for: "+t.id,e,[t.id]))}},x.require=x.makeRequire(),x}var g,x,y,D,I,E,N,J,s,O,ka=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/mg,la=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,Q=/\.js$/,ia=/^\.\//;x=Object.prototype;var K=x.toString,fa=x.hasOwnProperty,ha=Array.prototype.splice,z="undefined"!=typeof window&&"undefined"!=typeof navigator&&!!window.document,ea=!z&&"undefined"!=typeof importScripts,ja=z&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,Y="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),F={},q={},R=[],M=!1;if("undefined"==typeof define){if("undefined"!=typeof requirejs){if(G(requirejs))return;q=requirejs,requirejs=void 0}"undefined"!=typeof require&&!G(require)&&(q=require,require=void 0),g=requirejs=function(e,t,n,r){var i,s="_";return!H(e)&&"string"!=typeof e&&(i=e,H(t)?(e=t,t=n,n=r):e=[]),i&&i.context&&(s=i.context),(r=m(F,s))||(r=F[s]=g.s.newContext(s)),i&&r.configure(i),r.require(e,t,n)},g.config=function(e){return g(e)},g.nextTick="undefined"!=typeof setTimeout?function(e){setTimeout(e,4)}:function(e){e()},require||(require=g),g.version="2.1.14",g.jsExtRegExp=/^\/|:|\?|\.js$/,g.isBrowser=z,x=g.s={contexts:F,newContext:ga},g({}),v(["toUrl","undef","defined","specified"],function(e){g[e]=function(){var t=F._;return t.require[e].apply(t,arguments)}}),z&&(y=x.head=document.getElementsByTagName("head")[0],D=document.getElementsByTagName("base")[0])&&(y=x.head=D.parentNode),g.onError=ca,g.createNode=function(e){var t=e.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return t.type=e.scriptType||"text/javascript",t.charset="utf-8",t.async=!0,t},g.load=function(e,t,n){var r=e&&e.config||{};if(z)return r=g.createNode(r,t,n),r.setAttribute("data-requirecontext",e.contextName),r.setAttribute("data-requiremodule",t),r.attachEvent&&!(r.attachEvent.toString&&0>r.attachEvent.toString().indexOf("[native code"))&&!Y?(M=!0,r.attachEvent("onreadystatechange",e.onScriptLoad)):(r.addEventListener("load",e.onScriptLoad,!1),r.addEventListener("error",e.onScriptError,!1)),r.src=n,J=r,D?y.insertBefore(r,D):y.appendChild(r),J=null,r;if(ea)try{importScripts(n),e.completeLoad(t)}catch(i){e.onError(C("importscripts","importScripts failed for "+t+" at "+n,i,[t]))}},z&&!q.skipDataMain&&T(document.getElementsByTagName("script"),function(e){y||(y=e.parentNode);if(I=e.getAttribute("data-main"))return s=I,q.baseUrl||(E=s.split("/"),s=E.pop(),O=E.length?E.join("/")+"/":"./",q.baseUrl=O),s=s.replace(Q,""),g.jsExtRegExp.test(s)&&(s=I),q.deps=q.deps?q.deps.concat(s):[s],!0}),define=function(e,t,n){var r,i;"string"!=typeof e&&(n=t,t=e,e=null),H(t)||(n=t,t=null),!t&&G(n)&&(t=[],n.length&&(n.toString().replace(ka,"").replace(la,function(e,n){t.push(n)}),t=(1===n.length?["require"]:["require","exports","module"]).concat(t))),M&&((r=J)||(N&&"interactive"===N.readyState||T(document.getElementsByTagName("script"),function(e){if("interactive"===e.readyState)return N=e}),r=N),r&&(e||(e=r.getAttribute("data-requiremodule")),i=F[r.getAttribute("data-requirecontext")])),(i?i.defQueue:R).push([e,t,n])},define.amd={jQuery:!0},g.exec=function(b){return eval(b)},g(q)}})(this),define("requireLib",function(){}),define("util",[],function(){function e(e){return n===""?e:(e=e.charAt(0).toUpperCase()+e.substr(1),n+e)}function c(e,t,n){for(var r in t)if(t.hasOwnProperty(r)){if(!n&&e.hasOwnProperty(r))continue;e[r]=t[r]}return e}var t=document.createElement("div").style,n=function(){var e="t,webkitT,MozT,msT,OT".split(","),n,r=0,i=e.length;for(;r<i;r++){n=e[r]+"ransform";if(n in t)return e[r].substr(0,e[r].length-1)}return!1}(),r=function(){return window.requestAnimationFrame||window[n+"RequestAnimationFrame"]||function(e){return setTimeout(e,1e3/60)}}(),i=function(){return window.cancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window[n+"RequestAnimationFrame"]||clearTimeout}(),s=/firefox/i.test(navigator.userAgent),o=Object.prototype.toString,u=function(e){return"[object Function]"===o.call(e)},a=function(e){return"[object String]"===o.call(e)},f=function(e){return"[object Array]"===o.call(e)},l=function(e){return a(e)?document.getElementById(e):e},h={nextFrame:function(e){return r(e)},cancelFrame:function(e){i(e)},setCssPrefix:e,styleVender:n,isFirefox:s,isFunction:u,isString:a,isArray:f,getElement:l,extend:c};return h}),define("wave",[],function(){var e,t,n,r;return t=function(e){function t(e){var t=[].slice.call(arguments,0);Object.prototype.toString.call(t[0])==="[object Array]"&&(t=t[0]);if(t.length%2)throw"coordinate count should be even.";this.points=[];for(var n=0;n<t.length;n+=2)this.points.push({x:t[n],y:t[n+1]});this.actualPoints=this.points.slice(0),this.actualPoints.unshift({x:0,y:0}),this.actualPoints.push({x:1,y:1}),this.sampleCache={},this.factorialCache={},this.order=this.actualPoints.length-1,this.splineSampleCount=11,this.splineSamples=[],this.splineInterval=1/(this.splineSampleCount-1),this.calcSplineSamples()}return t.consts={NEWTON_ITERATIONS:4,NEWTON_MIN_SLOPE:.001,SUBDIVISION_PRECISION:1e-7,SUBDIVISION_MAX_ITERATIONS:10},t.prototype.calcSplineSamples=function(){for(var e=0;e<this.splineSampleCount;e++)this.splineSamples[e]=this.getFromT(e*this.splineInterval)},t.prototype.get=function(e){var t=this.getTFromX(e);return this.getFromT(t).y},t.prototype.getTFromX=function(e){var n=0,r=0;for(var i=1;i<this.splineSampleCount;i++)if(i===this.splineSampleCount-1||this.splineSamples[i].x>e){n=this.splineInterval*(i-1),r=i-1;break}var s=n+this.splineInterval*(e-this.splineSamples[r].x)/(this.splineSamples[r+1].x-this.splineSamples[r].x),o=this.getDerivativeFromT(s);return o.x>=t.consts.NEWTON_MIN_SLOPE?this.runNewtonRaphsonIterate(e,s):o.x==0?s:this.runBinarySubdivide(e,n,n+this.splineInterval)},t.prototype.runNewtonRaphsonIterate=function(e,n){for(var r=0;r<t.consts.NEWTON_ITERATIONS;r++){var i=this.getDerivativeFromT(n);if(i.x==0)return n;var s=this.getFromT(n).x-e;n-=s/i.x}return n},t.prototype.runBinarySubdivide=function(e,n,r){var i;for(var s=0;s<t.consts.SUBDIVISION_MAX_ITERATIONS;s++){i=n+(r-n)/2;var o=this.getFromT(i).x-e;if(o<=t.consts.SUBDIVISION_PRECISION)return i;o>0?r=i:n=i}return i},t.prototype.getFromT=function(e){var t=this.getCoefficients(),n=0,r=0,i=this.order;for(var s=0;s<=i;s++)n+=t[s].x*Math.pow(e,s),r+=t[s].y*Math.pow(e,s);return{x:n,y:r}},t.prototype.getCoefficients=function(){if(this.coefficients)return this.coefficients;var e=this.order;this.coefficients=[];for(var t=0;t<=e;t++){var n=0,r=0;for(var i=0;i<=t;i++){var s=Math.pow(-1,i+t)/(this.getFactorial(i)*this.getFactorial(t-i));n+=s*this.actualPoints[i].x,r+=s*this.actualPoints[i].y}var o=this.getFactorial(e)/this.getFactorial(e-t);this.coefficients.push({x:o*n,y:o*r})}return this.coefficients},t.prototype.getFactorial=function(e){return this.factorialCache[e]?this.factorialCache[e]:e===0?1:(this.factorialCache[e]=e*this.getFactorial(e-1),this.factorialCache[e])},t.prototype.getDerivativeFromT=function(e){var t=this.getCoefficients(),n=0,r=0,i=this.order;for(var s=1;s<=i;s++)n+=s*t[s].x*Math.pow(e,s-1),r+=s*t[s].y*Math.pow(e,s-1);return{x:n,y:r}},t.prototype.getSamples=function(e){if(this.sampleCache[e])return this.sampleCache[e];var t=[];for(var n=0;n<e;n++)t.push(this.get(n/(e-1)));this.sampleCache[e]=t},t.prototype.getEasing=function(){var e=this;return function(t){return e.get(t)}},t}({}),n=function(e){var n={Quad:function(e){return e*e},Cubic:function(e){return e*e*e},Quart:function(e){return e*e*e*e},Qunit:function(e){return e*e*e*e*e},Expo:function(e){return e*e*e*e*e*e},Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Back:function(e){return e*e*(3*e-2)},Elastic:function(e){return e===0||e===1?e:-Math.pow(2,8*(e-1))*Math.sin(((e-1)*80-7.5)*Math.PI/15)},Bounce:function(e){var t,n=4;while(e<((t=Math.pow(2,--n))-1)/11);return 1/Math.pow(4,3-n)-7.5625*Math.pow((t*3-2)/22-e,2)}},r=t,i={B2ToLinear:function(){var e=(new r(0,.4,.2,.4,.4,.55)).getEasing();return function(t){return e(t)}}()};return{easeInCurves:n,fastInCurves:i}}({}),r={repeat:function(e,t){var n=t*2-1;return function(t){var r=t*n,i=Math.floor(r),s=r-i,o=e(s);return i%2&&(o=1-o),o}},reverse:function(e){return function(t){return 1-e(1-t)}},reflect:function(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}}},e=function(e){function p(e){return Object.prototype.toString.call(e)==="[object String]"?s[e]||null:Object.prototype.toString.call(e)==="[object Array]"?(new i(e)).getEasing():null}var i=t,s={linear:function(e){return e},none:function(e){return 0},full:function(e){return 1},reverse:function(e){return 1-e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},spring:function(e){return 1-Math.cos(e*4.5*Math.PI)*Math.exp(-e*6)}},o=n,u=r,a=o.easeInCurves;for(var f in a){var l=a[f];s["easeIn"+f]=l,s["easeOut"+f]=u.reverse(l),s["easeInOut"+f]=u.reflect(l),s["easeOutIn"+f]=u.reflect(u.reverse(l))}var c=o.fastInCurves;for(var f in c){var l=c[f];s["fastIn"+f]=l,s["fastOut"+f]=u.reverse(l),s["fastInOut"+f]=u.reflect(l),s["fastOutIn"+f]=u.reflect(u.reverse(l))}var h={ease:[.25,.1,.25,1],"ease-in":[.42,0,1,1],"ease-out":[0,0,.58,1],"ease-in-out":[.42,0,.58,1]};for(var f in h)s[f]=(new i(h[f])).getEasing();return p.register=function(e,t){if(Object.prototype.toString.call(t)==="[object Function]")s[e]=t;else{var n=p(t);if(!n)throw"unregisterable";s[e]=n}},p.getMap=function(){return s},p}({}),e}),define("erasableMask",["util","wave"],function(e,t){var n=function(t,n){var t=e.getElement(t);if(!t){alert("必须要配置使用遮罩的DOM节点。");return}this.maskedDom=t,this._configs={left:0,top:0,color:"#666",alpha:100,checkDistance:20,radius:20,alphaRadius:10,showPoint:!1},e.isFunction(n)?this.setCallback(n):e.extend(this._configs,n||{},!0)},r="ontouchstart"in window,i=r?"touchstart":"mousedown",s=r?"touchmove":"mousemove",o=r?"touchend":"mouseup",u=r?"touchcancel":"mouseleave";return n.prototype.setCallback=function(e){return this._configs.callback=e,this},n.prototype.generateMask=function(){this.maskCanvas=document.createElement("canvas");var e="background-color: transparent;";e+="position: absolute;",e+="z-index: 2;",e+="left: "+this._configs.left+"px;",e+="top: "+this._configs.top+"px;",this.maskCanvas.style.cssText+=e;var t=getComputedStyle(this.maskedDom);"absolute"!==t.position&&"relative"!==t.position&&(this.maskedDom.style.position="relative"),this.originOverflow=t.overflow||"",this.maskedDom.style.overflow="hidden",this._configs.alpha&&this.setOpacity(this._configs.alpha),this.maskedDom.appendChild(this.maskCanvas)},n.prototype.setOpacity=function(e){return this.maskCanvas.style.opacity=e/100,this._configs.alpha=e,this},n.prototype.configMask=function(t){var n=this,r=this.maskedDom,u=this._configs,a=-this._configs.angle,f=e.setCssPrefix("transform"),l=u.width?u.width:r.offsetWidth-r.clientLeft-window.parseInt(getComputedStyle(r).borderRightWidth),c=u.height?u.height:r.offsetHeight-r.clientTop-window.parseInt(getComputedStyle(r).borderBottomWidth),h=u.calculHeight,p=c;h&&(c=h),u.eraseImage&&(this.eraseImage=this.createFloatImage(u.eraseImage,l/2,c/2,u.eraseImageWidth,u.eraseImageHeight),a&&!u.eraseCoverImage&&(this.eraseImage.style[f]="rotate("+a+"deg)")),u.eraseCoverImage&&(this._isEraseCovered=!0,this.eraseCoverImage=this.createFloatImage(u.eraseCoverImage,l/2,c/2,u.eraseCoverImageWidth,u.eraseCoverImageHeight),this.eraseCoverImage.style.zIndex=4,this.eraseCoverImage.addEventListener(i,function(e){n.maskedDom.removeChild(n.eraseCoverImage),n.maskedDom.removeChild(n.eraseCoverImageBg),n.eraseCoverImage=null,n.eraseCoverImageBg=null,u.eraseCoverText&&(n.maskedDom.removeChild(n.airIndexTip),n.airIndexTip=null),n.eraseImage.style[f]="rotate("+a+"deg)",n._isEraseCovered=!1,n.startErase(e)},!1),this.eraseCoverImage.addEventListener(s,this,!1),this.eraseCoverImage.addEventListener(o,this,!1),this.eraseCoverImageBg=this.createFloatDom("div",l/2,c/2,80,80,function(e){var t=document.createElement("style"),n="width:80px;height:80px;left:"+(l/2-40)+"px;"+"top:"+(c/2-40)+"px;opacity: 0.4;border-radius:40px;",r="width:80px;height:80px;left:"+(l/2-40)+"px;"+"top:"+(c/2-40)+"px;opacity: 0;border-radius:40px;",i="width:150px;height:150px;left:"+(l/2-75)+"px; "+"top:"+(c/2-75)+"px;opacity: 0;border-radius:75px;";t.innerHTML="@-webkit-keyframes sensorCoverBigger {0%{"+n+"}"+"90%{"+i+"}"+"95%{"+r+"}"+"100%{"+n+"}}"+"@-moz-keyframes sensorCoverBigger {"+"0%{"+n+"}"+"90%{"+i+"}"+"95%{"+r+"}"+"100%{"+n+"}}"+"@keyframes sensorCoverBigger {"+"0%{"+n+"}"+"90%{"+i+"}"+"95%{"+r+"}"+"100%{"+n+"}}",document.head.appendChild(t);var s="z-index: 3;background-color: #20b9e4; opacity: 0.4;border-radius:50px;";s+="-webkit-animation:sensorCoverBigger 2s 1s forwards linear infinite;",s+="-moz-animation:sensorCoverBigger 2s 1s forwards linear infinite;",s+="animation:sensorCoverBigger 2s 1s forwards linear infinite;",e.style.cssText+=s}),this.eraseCoverImage.style.zIndex=4),u.eraseCoverText&&(this.airIndexTip=this.buildAirIndexTip(l/2,c/2,u.eraseCoverImageWidth,u.eraseCoverImageHeight),this.buildAirIndexText(u.eraseCoverText,u.eraseCoverTextDesc));if(u.logoImage){if(e.isString(u.logoImage)){u.logoDom?this.logoImage=e.getElement(u.logoDom):this.logoImage=document.createElement("div");var d="background-image: url("+u.logoImage+");background-repeat: no-repeat;";d+="background-size: 100% 100%;",d+="position: absolute;",d+="z-index: 1;",d+=u.logoStyle,this.logoImage.style.cssText+=d,this.maskedDom.appendChild(this.logoImage)}else this.logoImage=u.logoImage;this._logoLeft=this.logoImage.offsetLeft,this._logoTop=this.logoImage.offsetTop,this._configs.logoClickStart&&this.logoImage.addEventListener(i,function(){n.start()},!1)}this.maskCanvas.width=l,this.maskCanvas.height=p;var v=r.getBoundingClientRect();this._offsetX=v.left+document.body.scrollLeft+r.clientLeft,this._offsetY=v.top+document.body.scrollTop+r.clientTop;var m=this.maskCanvas.getContext("2d");if(u.maskImage){var n=this,g=document.createElement("img");g.src=u.maskImage,g.style.display="none",document.body&&document.body.appendChild(g),g.addEventListener("load",function(){m.drawImage(g,0,0,l,p),m.globalCompositeOperation="destination-out",document.body&&document.body.removeChild(g),g=null,n.generateCheckPoints();try{m.getImageData(0,0,1,1)}catch(e){n.isTainted=!0}t(m)})}else m.fillStyle=u.color,m.fillRect(0,0,l,p),this.generateCheckPoints(),m.globalCompositeOperation="destination-out",t(m)},n.prototype.start=function(){function t(t){e._configs.showPoint&&e.getErasePercent(!0),e.maskCanvas.addEventListener(i,e,!1),e.maskCanvas.addEventListener(s,e,!1),e.maskCanvas.addEventListener(o,e,!1),e.maskCanvas.addEventListener(u,e,!1),e.eraseImage&&(e.eraseImage.addEventListener(i,e,!1),e.eraseImage.addEventListener(s,e,!1),e.eraseImage.addEventListener(o,e,!1))}var e=this;if(!e.maskedDom)return;return e.maskCanvas||e.generateMask(),e.configMask(t),this},n.prototype.clearMask=function(n,r){function d(){p.clearRainDrop(),a.clearRect(0,0,p.maskCanvas.width,p.maskCanvas.height),p.eraseCoverImage&&(p.maskedDom.removeChild(p.eraseCoverImage),p.maskedDom.removeChild(p.eraseCoverImageBg),p.eraseCoverImage=null,p.eraseCoverImageBg=null),p.airIndexTip&&(p.maskedDom.removeChild(p.airIndexTip),p.airIndexTip=null),r()}function v(){if(!p.maskCanvas)return;var t=(Date.now()-f)/n;if(t>1){d();return}h=(1-l(t))*c,p.maskCanvas.style.opacity=h,e.nextFrame(v)}this.maskCanvas.removeEventListener(i,this,!1),this.maskCanvas.removeEventListener(s,this,!1),this.maskCanvas.removeEventListener(o,this,!1),this.maskCanvas.removeEventListener(u,this,!1),this.eraseImage&&(this.eraseImage.removeEventListener(i,this,!1),this.eraseImage.removeEventListener(s,this,!1),this.eraseImage.removeEventListener(o,this,!1));var a=this.maskCanvas.getContext("2d"),f=Date.now(),l=t("ease-out"),c=this._configs.alpha/100||1,h,p=this;return n?v():(d(),r()),this},n.prototype.stop=function(){if(!this.maskedDom)return;return this.maskedDom.removeChild(this.maskCanvas),this.maskCanvas=null,this.maskedDom.style.overflow=this.maskedDom.originOverflow,this},n.prototype.handleEvent=function(e){if(this._isEraseCovered)return;switch(e.type){case i:return this.startErase(e);case s:return this.doErase(e);case o:return this.endErase(e);case u:return this.endErase(e)}},n.prototype.startErase=function(e){e.preventDefault(),this._startedErase=!0,this.eraseRecords=[]},n.prototype.doErase=function(e){e.preventDefault();if(this._startedErase){e.changedTouches&&(e=e.changedTouches[e.changedTouches.length-1]);var t=(e.clientX+document.body.scrollLeft||e.pageX)-this._offsetX||0,n=(e.clientY+document.body.scrollTop||e.pageY)-this._offsetY||0;this._configs.onStart&&!this._firedOnStart&&(this._configs.onStart(t,n),this._firedOnStart=!0),this.eraseImage&&(this.eraseImage.style.left=t-this.eraseImage.offsetWidth/2+"px",this.eraseImage.style.top=n-this.eraseImage.offsetHeight/2+"px");var r=this._configs.radius,i=this.maskCanvas.getContext("2d");i.beginPath(),this._configs.eraseWidth?(i.fillStyle="#000",this.eraseOval(i,t,n,this._configs.eraseWidth,this._configs.eraseHeight,-this._configs.angle,this._configs.alphaRadius),i.fillStyle="#000"):r&&(this.eraseCircle(i,t,n,r,this._configs.alphaRadius),i.fillStyle="#000"),this.isTainted&&this.eraseRecords.push([t,n]),this._prevX=t,this._prevY=n}else this._prevX=0,this._prevY=0},n.prototype.eraseCircle=function(e,t,n,r,i){e.beginPath();if(i){var s=r+i,o=e.createRadialGradient(t,n,r,t,n,s);o.addColorStop(0,"rgba(255, 255, 255, 1)"),o.addColorStop(1,"rgba(255, 255, 255, 0)"),e.fillStyle=o,e.arc(t,n,s,0,Math.PI*2)}else e.arc(t,n,r,0,Math.PI*2);e.fill()},n.prototype.eraseRect=function(e,t,n,r,i,s){s?(e.save(),e.translate(t,n),e.rotate(s*Math.PI/180),e.fillRect(-r/2,-i/2,r,i),e.restore()):e.fillRect(t-r/2,n-i/2,r,i)},n.prototype.eraseOval=function(e,t,n,r,i,s,o){function u(t,n,r,i){var s=r/.6/2,u=i/2;o&&(u+=o),e.beginPath(),e.moveTo(t,n-u),e.bezierCurveTo(t+s,n-u,t+s,n+u,t,n+u),e.bezierCurveTo(t-s,n+u,t-s,n-u,t,n-u);if(o){var a=0,f=i+o,l=e.createRadialGradient(t,n,a,t,n,f);l.addColorStop(0,"rgba(255, 255, 255, 1)"),l.addColorStop(1,"rgba(255, 255, 255, 0)"),e.fillStyle=l}e.fill(),e.closePath()}s?(e.save(),e.translate(t,n),e.rotate(s*Math.PI/180),u(0,0,r,i),e.restore()):u(t,n,r,i)},n.prototype.endErase=function(e){if(!this._startedErase)return;e.preventDefault(),this._startedErase=!1,this._firedOnStart=!1;var t=this.getErasePercent();this._configs.callback&&this._configs.callback(t*100,this._prevX,this._prevY)},n.prototype.generateCheckPoints=function(){this.checkPoints=[];var e=this.maskCanvas.width,t=this._configs.calculHeight||this.maskCanvas.height,n=this._configs.checkDistance,r=Math.ceil(e/n),i=Math.ceil(t/n),s,o;for(var u=0;u<r;u++)for(var a=0;a<i;a++)u===r-1?s=e/2+(r-1)*n/2:s=window.parseInt(n/2+u*n),a===i-1?o=t/2+(i-1)*n/2:o=window.parseInt(n/2+a*n),this.checkPoints.push([s,o,0])},n.prototype.getErasePercent=function(e){var t=this.maskCanvas.width,n=this.maskCanvas.height,r=this.maskCanvas.getContext("2d"),i;this.isTainted||(i=r.getImageData(0,0,t,n));if(this.isTainted&&!e)return this.getErasePercentByRecord();var s,o,u,a=0;e&&(r.globalCompositeOperation="source-over",r.fillStyle="#000");var f=this.checkPoints,l=f.length;for(var c=0;c<l;c++)s=f[c][0],o=f[c][1],this.isTainted||(u=this.getColorValue(i,s,o),0===u[3]&&a++),e&&r.fillRect(s,o,1,1);if(!e)return a/l;r.globalCompositeOperation="destination-out"},n.prototype.getErasePercentByRecord=function(){var e=this.eraseRecords,t=this.checkPoints,n=t.length,r=0,i=0,s;for(var o=0,u=e.length;o<u;o++){s=this.getNeedCheckArr(e[o]);for(var a=0;a<n;a++){r++;if(t[a][2])continue;i++,this._configs.radius>=this.calculateDis(e[o],t[a])&&(t[a][2]=1)}}var f=0;for(var l=0;l<n;l++)t[l][2]&&f++;return f/n},n.prototype.getNeedCheckArr=function(e){},n.prototype.calculateDis=function(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))},n.prototype.getColorValue=function(e,t,n){var r=(t+n*e.width)*4,i=e.data[r],s=e.data[r+1],o=e.data[r+2],u=e.data[r+3];return[i,s,o,u]},n.prototype.rainDrop=function(n,r,i,s,o,u,a){function v(){if(!f.maskCanvas)return;var t=(Date.now()-c)/u;if(t>1){f.eraseRect(l,r,i+a/2,s,a),f.eraseCircle(l,r,i+a,s/2);return}d=p(t)*a,f.eraseRect(l,r,i+p(t)*a/2,s,d),h.style.top=i+d-3+"px",e.nextFrame(v)}if(!this.maskCanvas)return;var f=this,l=this.maskCanvas.getContext("2d"),c=Date.now(),h=f.createFloatImage(n,r+1,i-3,s+6,o+6),p=t("ease-out");this.rainDrops=this.rainDrops||[],this.rainDrops.push(h);var d;return this.eraseCircle(l,r,i,s/2),v(),this},n.prototype.clearRainDrop=function(){if(!this.rainDrops||!this.maskedDom)return;for(var e=0,t=this.rainDrops.length;e<t;e++)this.maskedDom.removeChild(this.rainDrops[e]);return this.rainDrops=[],this},n.prototype.createFloatDom=function(t,n,r,i,s,o,u){var a,f;t||(t="div"),e.isString(t)?a=document.createElement(t):a=t;var f="position: absolute;";return f+="z-index: "+(u|3)+";",f+="left: "+(n-i/2)+"px;",f+="top: "+(r-s/2)+"px;",f+="width: "+i+"px;",f+="height: "+s+"px;",a.style.cssText+=f,e.isFunction(o)&&o(a),this.maskedDom.appendChild(a),a},n.prototype.createFloatImage=function(t,n,r,i,s){var o,u,a="div";return e.isString(t)||(a=t),o=this.createFloatDom(a,n,r,i,s,function(n){if(e.isString(t)){var r="background-image: url("+t+");background-repeat: no-repeat;";r+="background-size: 100% 100%;",n.style.cssText+=r}},3),o},n.prototype.rotateEraseImage=function(n,r){function g(){if(!m.maskCanvas)return;var t=(Date.now()-i)/n;if(t>1){m.maskedDom.removeChild(m.eraseImage),m.eraseImage=null,r();return}p=p>=360?0:p+20,v="left:"+(u+(f-u)*d(t))+"px;"+"top:"+(a+(l-a)*d(t))+"px;"+"width:"+s*(1-d(t))+"px;"+"height:"+o*(1-d(t))+"px",m.eraseImage.style.cssText+=v,m.eraseImage.style[c]="rotate("+p+"deg)",e.nextFrame(g)}var i=Date.now(),s=this.eraseImage.offsetWidth,o=this.eraseImage.offsetHeight,u=window.parseInt(this.eraseImage.style.left),a=window.parseInt(this.eraseImage.style.top),f=this._logoLeft+this.logoImage.offsetWidth/2,l=this._logoTop+this.logoImage.offsetHeight/2,c=e.setCssPrefix("transform"),h=-this._configs.angle,p=h,d=t("ease-out"),v,m=this;n?g():(this.maskedDom.removeChild(this.eraseImage),this.eraseImage=null,r())},n.prototype.buildAirIndexTip=function(e,t,n,r){var i=this._configs,s=i.eraseCoverText,o=this,u=this.createFloatDom("div",e,t+r-20,n,r,function(e){var t="font-size: 17px; color: #0996d1; text-align: center;";t+="line-height: 21px;",e.style.cssText+=t},4);return u},n.prototype.buildAirIndexText=function(e,t){return this.airIndexTip.innerHTML='<h3 style="padding: 0; margin: 0; line-height: 20px;">空气质量指数</h3><p style="margin:0;padding:5px 0;font-size: 20px;font-weight: bold;">'+e+'<i style="display: inline-block; min-width: 50px; line-height: 16px;height: 16px; color: #fff; background-color: #0996d1;'+'-webkit-border-radius: 16px;-moz-border-radius: 16px;border-radius: 16px;margin-left:5px;font-style: normal;font-size: 12px;font-weight: normal;vertical-align: top;margin-top: 2px;padding: 0 5px;">'+t+"</i></p>",this},n}),define("erasePM25Mask",["erasableMask"],function(e){function t(e){return e<=50?20:e>=350?100:100-(350-e)*(80/300)}function p(e,t,n,r,i,s,o){if(h>=5)return;h++,setTimeout(function(){c.rainDrop(a,e,t,n,r,i,s)},o)}function v(){d++,d>=2&&(c.stop(),h=0,d=0,n.mozUserSelect=r,n.webkitUserSelect=r)}function m(n,r,u){r!="优"&&r!="良"&&(r+="污染"),c=new e(document.body,{calculHeight:document.documentElement.clientHeight,alpha:t(n),alphaRadius:10,radius:100,eraseWidth:50,eraseHeight:140,angle:45,eraseImage:s,eraseImageWidth:49,eraseImageHeight:134,eraseCoverImage:o,eraseCoverImageWidth:142,eraseCoverImageHeight:196,eraseCoverText:n,eraseCoverTextDesc:r,logoDom:u,logoImage:"http://bs.baidu.com/public01/bcs-sensor/images/pm2.5/pm_logo.png",logoClickStart:!0,maskImage:i,onStart:function(e,t){p(e-10,t+30,14,14,4e3,400,200),p(e-35,t+20,10,10,4e3,500,1e3)},callback:function(e,t,n){e>=5&&p(t,n+20,8,8,4e3,400,200),e>=15&&p(t,n+30,12,12,5e3,600,200),e>=25&&p(t+20,n+20,9,9,5e3,500,200),e>=40&&(c.clearMask(2e3,v),c.rotateEraseImage(2e3,v))}}),setTimeout(function(){c.start()},100)}var n=document.body.style,r=n.mozUserSelect||n.webkitUserSelect;n.mozUserSelect="none",n.webkitUserSelect="none";var i="http://bs.baidu.com/public01/bcs-sensor/images/pm2.5/pm_fog_big.png",s="http://bs.baidu.com/public01/bcs-sensor/images/pm2.5/pm_bottle.png",o="http://bs.baidu.com/public01/bcs-sensor/images/pm2.5/pm_tip.png",u="http://bs.baidu.com/public01/bcs-sensor/images/pm2.5/pm_logo.png",a="http://bs.baidu.com/public01/bcs-sensor/images/pm2.5/waterdrop.png",f=130,l="轻度污染",c,h=0,d=0;return m});